<h1>Survey questions</h1>

<p>
  <strong><%= t("activerecord.attributes.survey.name") %>:</strong>
  <%= @admin_survey.name %>
</p>

<p>
  <strong><%= t("activerecord.attributes.survey.language_code") %>:</strong>
  <%= @admin_survey.language_code.code %> (<%= @admin_survey.language_code.name %>)
</p>

<br/><br/>
<% if @survey_questions.count > 0 %>
<strong>Question in this survey:</strong>
<table class="records-table">
  <thead>
  <tr>
    <th><%= sortable_column :name, t('activerecord.attributes.question.name') %></th>
    <th><%= sortable_column :language_code, t('activerecord.attributes.question.language_code') %></th>
    <th><%= sortable_column :question, t('activerecord.attributes.question.question') %></th>
    <th><%= sortable_column :answers, t('activerecord.attributes.question.answers') %></th>
    <th><%= sortable_column :correct_answer, t('activerecord.attributes.question.correct_answer') %></th>
    <th></th>
    <th></th>
  </tr>
  </thead>

  <tbody>
  <% @survey_questions.each do |admin_question| %>
      <tr>
        <td><%= admin_question.name %></td>
        <td><%= admin_question.language_code.code %> (<%= admin_question.language_code.name %>)</td>
        <td><%= admin_question.question %></td>
        <td><%= admin_question.answers %></td>
        <td><%= admin_question.correct_answer %></td>
        <td><%= link_to 'Show', admin_question_path(admin_question) %></td>
        <td><%= link_to 'Remove from survey', remove_question_admin_survey_path(
                id: @admin_survey, question_id: admin_question), :method => :put,
                        data: { confirm: 'Are you sure?' } %></td>
      </tr>
  <% end %>
  </tbody>
</table>
<% else %>
    No questions in this survey currently
<% end %>
<br/>
<!-- TODO: create new question link -->
<%= link_to 'New question', new_question_admin_survey_path %>
<br/>
<% if @questions.count > 0 %>
<strong>Add existing questions:</strong>
<table class="records-table">
  <thead>
  <tr>
    <th><%= sortable_column :name, t('activerecord.attributes.question.name') %></th>
    <th><%= sortable_column :language_code, t('activerecord.attributes.question.language_code') %></th>
    <th><%= sortable_column :question, t('activerecord.attributes.question.question') %></th>
    <th><%= sortable_column :answers, t('activerecord.attributes.question.answers') %></th>
    <th><%= sortable_column :correct_answer, t('activerecord.attributes.question.correct_answer') %></th>
    <th></th>
  </tr>
  </thead>

  <tbody>
  <% @questions.each do |admin_question| %>
      <tr>
        <td><%= admin_question.name %></td>
        <td><%= admin_question.language_code.code %> (<%= admin_question.language_code.name %>)</td>
        <td><%= admin_question.question %></td>
        <td><%= admin_question.answers %></td>
        <td><%= admin_question.correct_answer %></td>
        <td><%= link_to 'Add to survey', add_question_admin_survey_path(
                        id: @admin_survey, question_id: admin_question), :method => :put %></td>
      </tr>
  <% end %>
  </tbody>
</table>
<% else %>
    No questions to add with "<%= @admin_survey.language_code.code %>" langauge code
<% end %>
<br/><br/>
<%= link_to 'Back', @admin_survey %>